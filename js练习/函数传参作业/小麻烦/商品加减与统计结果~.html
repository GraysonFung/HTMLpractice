
	<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>无标题文档</title>
<script>
window.onload = function () {
	var oUl = document.getElementById('list');
	var aLi = oUl.getElementsByTagName('li');
	var aPrice  = [];
	var aStrong = [];
	// fnCount ( aLi[0] );
	for ( var i=0; i<aLi.length; i++ ) {
		fnCount ( aLi[i] );
	}
	function fnCount ( li ) {
		var aBtn = li.getElementsByTagName ('input');
		var oStrong = li.getElementsByTagName ('strong')[0];
		var oEm = li.getElementsByTagName ('em')[0];
		var oSpan = li.getElementsByTagName ('span')[0];
		var n = oStrong.innerHTML;			// '0'
		var price = parseFloat(oEm.innerHTML);			// 12.5
//合计
		var oP = document.getElementsByTagName('p')[0];
		var oStrong1 = oP.getElementsByTagName('strong')[0];
		var oSpan1 = oP.getElementsByTagName('span');
		//全局变量的使用；
		Sumnum= 0 ;
		Sumprice = 0;

		aBtn[0].onclick = function () {
			if ( n > 0 ) {
				n--;
				Sumnum--;
				Sumprice -= price ;
			}
			bigst();
		};
		aBtn[1].onclick = function () {
			n++;
			Sumnum ++;
			Sumprice += price ;
			// oStrong.innerHTML = n;
			// oSpan.innerHTML = n*price + '元';
			// oStrong1.innerHTML = Sumnum;
			// oSpan1[0].innerHTML =Sumprice;
			bigst()
		};
		function bigst(){
			oStrong.innerHTML = n;
			oSpan.innerHTML = n*price + '元';
			oStrong1.innerHTML = Sumnum;
			oSpan1[0].innerHTML =Sumprice;
			aPrice = [0];//在里面加一个零，是为了使在aPrice为空时 Math.max.apply(null,aPrice) = 0否则会显示infinity；
			oSpan1[1].innerHTML = 0;
			for ( var i=0; i<aLi.length; i++ ) {
				// aStrong.push( aLi[i].getElementsByTagName('strong')[0].innerHTML );
				if(parseFloat(aLi[i].getElementsByTagName('strong')[0].innerHTML) != 0){
					aPrice.push(parseFloat(aLi[i].getElementsByTagName('em')[0].innerHTML));
				}
				oSpan1[1].innerHTML = Math.max.apply(null,aPrice)  ;
			}
	}
// for ( var i=0; i<aLi.length; i++ ) {
// 	// aStrong.push( aLi[i].getElementsByTagName('strong')[0].innerHTML );
// 	if(parseFloat(aLi[i].getElementsByTagName('strong')[0].innerHTML) == 0){
// 		aPrice.push(aLi[i].getElementsByTagName('em')[0].innerHTML);
// 	}
// }

	// oSpan1[1].innerHTML = Math.max.apply(null,aPrice);
	// alert(Math.max.apply(null,aPrice));
}

};
</script>
</head>

<body>

<ul id="list">
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>12.5元</em>
    小计：<span>0元</span>
  </li>
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>10.5元</em>
    小计：<span>0元</span>
  </li>
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>8.5元</em>
    小计：<span>0元</span>
  </li>
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>8元</em>
    小计：<span>0元</span>
  </li>
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>14.5元</em>
    小计：<span>0元</span>
  </li>
</ul>

<p>
商品合计共：<strong>0</strong>件，共花费了：<span>0</span>元<br />
其中最贵的商品单价是：<span>0</span>元
</p>

</body>
</html>
